/**
* 리뷰목록(core)
* 제작 : 웹퍼블릭(http://webpublic.co.kr)
* 버전 : 1.3.3
* 최종업데이트 : 2022.10.17
* 웹퍼블릭에서 개발된 플러그인으로 무단 복제/사용 하실 수 없습니다
* 주석제거 시 플러그인을 사용하실 수 없습니다.
*/

var ListReview=function(a){var b=a(window).width(),c=a(window).height(),d={},e={target:".wpReview",listType:"list",useSmallThumb:!0,useListThumbCss:!0,useReadMore:!0,readMoreBtn:"#wpMore",readMoreInitNum:10,readMoreLoadNum:10,readMoreUseCache:!1,readMoreUseAutoload:!1,listThumbHeight:218},f=function(b){d.settings=jQuery.extend({},e,b),d.settings.readMoreItem=d.settings.target+" .wpReview .review-list > li",a(d.settings.target+" .wpReview .review-list li.displaynone").remove(),d.settings.useReadMore||a(d.settings.readMoreBtn).remove(),s(),"list"==d.settings.listType&&(t(),d.settings.useReadMore?g(d.settings.readMoreItem,d.settings.readMoreBtn,d.settings.readMoreInitNum,d.settings.readMoreLoadNum,d.settings.readMoreUseCache,d.settings.readMoreUseAutoload):q(d.settingsreadMoreInitNum)),"detail"==d.settings.listType&&(r(),u()),o()},g=function(b,c,d,e,f,g){var i=a(b).size(),j=d;if(!0==f){var k=a(b).parent("ul").data("cache-name"),l=h("cate_no");if(!k)return void console.error("\uC124\uC815\uC624\uB958: \uCE90\uC2DC\uB97C \uC0AC\uC6A9\uD558\uAE30 \uC704\uD574\uC11C\uB294 cache-name\uC744 \uC9C0\uC815\uD574\uC57C \uD569\uB2C8\uB2E4");l||(l=c),k=k.replace("{cate_no}",l),j=readCookie("_crm_"+k),jQuery11.isNumeric(j)||(j=d),d<j&&(d=j)}i==j||i<=d||0==i?a(c).remove():a(c).show(),q(d),a(b).slice(0,d).queue(function(){}).css("display","inline-block").show(),a(document).on("click",c,function(a){a.preventDefault(),m()});var m=function(){a(b+":hidden").slice(0,e).css({display:"inline-block",opacity:0,top:"-10px"}).queue(function(){a(this).find(".thumb").attr("src",a(this).find(".thumb").data("src")),a(this).find(".prod-thumb").attr("src",a(this).find(".prod-thumb").data("src"));a(this)}).stop().animate({opacity:1,top:0},500),!0==f&&createCookie("_crm_"+k,a(b+":visible").size()),0==a(b+":hidden").length&&a(c).remove()};g&&a(window).scroll(function(){if(0!=a(b+":hidden").length){var c=a(window).scrollTop()+a(window).height();c+=300;var d=a(b).parent("ul").offset().top+a(b).parent("ul").height();d<c&&m()}})},h=function(a,b){if(b)var c=b;else var c=window.document.URL.toString();if(0<c.indexOf("?")){var d=c.split("?"),e=d[1].split("&"),f=Array(e.length),g=Array(e.length),h=0;for(h=0;h<e.length;h++){var j=e[h].split("=");f[h]=j[0],g[h]=""==j[1]?"No Value":unescape(j[1])}for(h=0;h<e.length;h++)if(f[h]==a)return g[h];return null}},i=function(b){var c=null;return a.ajax({type:"get",url:"/board/review/vote.html",data:"no="+b+"&board_no=4",dataType:"text",timeout:5e3,cache:!0,async:!1,beforeSend:function(){},error:function(){},success:function(d){vote_url=a(d).find("#voteUrl").text().match(/\'.*\'/gi)[0].replace(/\'/g,""),a.ajax({type:"get",url:vote_url,dataType:"text",timeout:1e4,cache:!0,async:!1,beforeSend:function(){},error:function(){},success:function(d){var e=a(d).text().replace(/[^[가-힣\s]/gi,"").trim();if("%EC%B6%94%EC%B2%9C%EB%90%98%EC%97%88%EC%8A%B5%EB%8B%88%EB%8B%A4"==encodeURIComponent(e)){var f=parseInt(a("#wp-vote-"+b).text())+1;a("#wp-vote-"+b).text(f),c=f}else alert(e)}})}}),c},j=function(a,b){b||(b="0");var c="/board/review/read.html?board_no=4&no="+a+"&load_slide_no="+b;l(c)},k=function(a){l("/board/review/modify.html?board_act=edit&no="+a+"&board_no=4")},l=function(b){a(d.settings.target+" .clone-slide-bg").remove();var c="no";mobileWeb&&(c="yes");var e="<div id=\"readReviewFrameWrap\"><div class=\"read close open-review\"></div><iframe src=\""+b+"\" scrolling=\""+c+"\" id=\"readReviewFrame\" name=\"readReviewFrame\"></iframe></div>";"block"==a(".pop-review-bg").css("display")?(0<a("#readReviewFrameWrap").length&&a("#readReviewFrameWrap").remove(),a(".pop-review-bg").hide(),mobileWeb&&a("html").removeClass("review").promise().done(function(){a(document).scrollTop(d.settings._curScrPosY)})):(mobileWeb&&(d.settings._curScrPosY=a(document).scrollTop()),0==a("body > .pop-review-bg").length&&a("body").append("<div class=\"pop-review-bg open-review\"><div class=\"review-loading\"></div></div>"),a(".pop-review-bg .review-loading").show(),jQuery11(".pop-review-bg").show().promise().done(function(){a(".pop-review-bg").append(e)}))},m=function(b,c){if(!(0<a(".movement").length)){var d=a("<div class=\"movement\"></div>");b&&a(d).append("<a class=\"link-prev\" href=\"/board/review/read.html"+b+"\">\uC774\uC804\uAE00</a>"),c&&a(d).append("<a class=\"link-next\" href=\"/board/review/read.html"+c+"\">\uB2E4\uC74C\uAE00</a>"),a("#readReviewFrameWrap").append(d),a(document).on("click",".link-prev",function(b){b.stopPropagation(),b.preventDefault();var c=h("no",a(this).attr("href")),d=h("board_no",a(this).attr("href"));a(".movement").remove(),a("#readReviewFrame, #readReviewFrameWrap .read.close").hide(),a(".review-loading").show(),a("#readReviewFrame").attr("src","/board/review/read.html?board_no="+d+"&no="+c+"&load_slide_no=0")}),a(document).on("click",".link-next",function(b){b.stopPropagation(),b.preventDefault();var c=h("no",a(this).attr("href")),d=h("board_no",a(this).attr("href"));a(".movement").remove(),a("#readReviewFrame, #readReviewFrameWrap .read.close").hide(),a(".review-loading").show(),a("#readReviewFrame").attr("src","/board/review/read.html?board_no="+d+"&no="+c+"&load_slide_no=0")})}},n=function(b,c){var e=a("<div class=\"center-box\"></div>").append(b).append("<div class=\"full-img close\"></div>");a(d.settings.target+" .wpReview").parent().append(a("<div class=\"clone-slide-bg\"></div>").append(e)),a(d.settings.target+" .clone-slide-bg").fadeIn();a(d.settings.target+" .cloneReviewPhotos").bxSlider({mode:"fade",auto:!1,autoHover:!1,speed:0,pause:2500,adaptiveHeight:!1,adaptiveHeightSpeed:0,pager:!0,startSlide:c,onSliderLoad:function(){1>=a(d.settings.target+" .clone-slide-bg .cloneReviewPhotos li").length&&a(d.settings.target+" .clone-slide-bg .bx-has-controls-direction").addClass("displaynone"),a(d.settings.target+" .clone-slide-bg .bx-controls-direction").appendTo(a(d.settings.target+" .clone-slide-bg")),a(d.settings.target+" .cloneReviewPhotos img, "+d.settings.target+" .full-img.close").click(function(){a(d.settings.target+" .clone-slide-bg").remove()}),p(c)},onSlideBefore:function(a,b,c){setTimeout(function(){p(c)},0)}})},o=function(){a(window).resize(function(){if(0<a("#readReviewFrame").length){var b=a("#readReviewFrame").get(0).contentWindow.ReadReview.getCurrentIndex();a("#readReviewFrame").get(0).contentWindow.ReadReview.frameResize(b)}})},p=function(e){var f=a(d.settings.target+"  .cloneReviewPhotos li:eq("+e+") img").prop("naturalWidth"),g=a(d.settings.target+"  .cloneReviewPhotos li:eq("+e+") img").prop("naturalHeight"),h=b*(1-10/100),i=c*(1-10/100);if(f>=h||g>=i){var j=0;if(f<=g){var j=100*(i/g);f=f*j/100,g=i}else{var j=100*(h/f);g=g*j/100}}h<f&&(f=h),i<g&&(g=i),a(d.settings.target+" .clone-slide-bg li").css("width","auto"),a(d.settings.target+" .clone-slide-bg li img").css("width","100%"),a(d.settings.target+" .clone-slide-bg .bx-viewport").css({width:f,height:g})},q=function(b){var c=d.settings.listThumbHeight,e=a(d.settings.target+" .wpReview .review-list > li:first-child .box").width();0>=e&&(e=a(window).width()/2),a(d.settings.target+" .wpReview .review-list > li").each(function(f){var g=this,h=a(this).data("idx"),i=a(this).find(".thumb"),j=null;j=-1<i.data("attach").replace(location.host,"").indexOf(".")?i.data("attach"):i.data("src"),d.settings.useReadMore?b>f?(i.attr("src",j),a(this).find(".prod-thumb").attr("src",a(this).find(".prod-thumb").data("src"))):i.attr("data-src",j):(i.attr("src",j),a(this).find(".prod-thumb").attr("src",a(this).find(".prod-thumb").data("src")),a(this).css({display:"inline-block"})),d.settings.useListThumbCss&&(a(this).find(".box > .img").css({height:c,overflow:"hidden"}),a("<img>").attr("src",j).load(function(){var a=this.width,b=this.height;if(a>b)var d=a*(100*(c/b))/100,f=c;else if(a<b)var d=e,f=b*(100*(e/a))/100;else if(a==b)if(a>e)var d=a*(100*(c/b))/100,f=c;else var d=a,f=b;i.css({width:d,height:f,position:"absolute",top:"50%",left:"50%","margin-top":-(f/2),"margin-left":-(d/2)})})),d.settings.useSmallThumb&&a.ajax({type:"get",url:"/exec/front/board/product/4",data:"no="+h+"&board_no=4",dataType:"json",timeout:1e4,cache:!0,async:!0,beforeSend:function(){},error:function(){},success:function(b){if(b.read.content_image){var c="",d=a.parseHTML(b.read.content_image);a.each(d,function(b,d){a(d).attr("src")&&(c+="<li><img src=\""+a(d).attr("src")+"\" /></li>\n")});var e=a("<ul class=\"thumb-list thumb-list-"+h+"\" data-idx=\""+h+"\"></ul>").append(c);a(g).find(".img").append(e)}}})}),a(".wpReview .review-list.gall li.item:first-child").css("visibility","visible")},r=function(){a(d.settings.target+" .wpReview .review-list.list > li").each(function(){var b=this,c=a(this).data("idx");a.get("/exec/front/board/product/4?no="+c+"&board_no=4",function(c){var d=JSON.parse(c);!0===d.write_auth&&a(b).find(".btnModify").show(),d.read.content_image&&(a(b).find(".reviewThumb").append("<dd class=\"thumb-imgs\">"+d.read.content_image+"</dd>"),a(b).find(".reviewThumb .thumb-imgs").find("br").remove(),a(b).find(".reviewThumb .thumb-imgs img").wrap("<span></span>"))})})},s=function(){a(".review-list .comment").each(function(){var b=a(this).text().replace(/[^0-9]/g,"");b?a(this).text(b).show():a(this).remove()})},t=function(){a(document).on("click",".open-review",function(b){b.preventDefault(),b.stopPropagation();var c=a(this).closest(".item").data("idx");j(c)}),a(document).on("click",d.settings.target+" .wpReview .thumb-list li",function(){var b=a(this).closest("ul").data("idx");j(b,a(this).index())})},u=function(){a(document).on("click",".open-review",function(b){b.preventDefault(),b.stopPropagation();var c=a(this).closest(".item").data("idx");j(c)}),a(d.settings.target+" .wpReview.xans-product-review .box-left .more").click(function(){"block"==a(this).closest(".desc.short").css("display")&&(a(this).parent().parent().find("dd.desc.origin").show(),a(this).closest("dd.desc.short").hide())}),a(d.settings.target+" .wpReview.xans-product-review .box-left .hide").click(function(){"block"==a(this).closest(".desc.origin").css("display")&&(a(this).parent().parent().find("dd.desc.short").show(),a(this).closest("dd.desc.origin").hide())}),a(document).on("click",d.settings.target+" .wpReview .thumb-imgs span",function(){var b=a(this).closest("li").data("idx");j(b,a(this).index())})};return{init:function(a){f(a)},voteUp:function(a){return i(a)},readReview:function(a){j(a)},getParam:function(a,b){return h(a,b)},imageSlide:function(a,b){n(a,b)},modify:function(b){var c=a(b).closest("li").data("idx");k(c)},login:function(){confirm("\uB85C\uADF8\uC778\uC744 \uD558\uC154\uC57C \uD6C4\uAE30 \uC791\uC131\uC774 \uAC00\uB2A5\uD569\uB2C8\uB2E4.\n\uB85C\uADF8\uC778 \uD398\uC774\uC9C0\uB85C \uC774\uB3D9\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?")&&(location.href="/member/login.html?returnUrl="+encodeURIComponent(location.href))},arrowPrevNext:function(a,b){m(a,b)}}}(jQuery11);$(window).load(function(){$(".review-list > li").each(function(){$self=$(this),$(this).find("p.desc").text().includes("\uCC28\uB2E8\uB41C")&&$self.addClass("disp-block-target")})});