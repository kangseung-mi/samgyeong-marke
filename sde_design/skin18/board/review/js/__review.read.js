/**
* 리뷰읽기(core)
* 제작 : 웹퍼블릭(http://webpublic.co.kr)
* 버전 : 1.3.3
* 최종업데이트 : 2022.10.17
* 웹퍼블릭에서 개발된 플러그인으로 무단 복제/사용 하실 수 없습니다
* 주석제거 시 플러그인을 사용하실 수 없습니다.
*/

var ReadReview=function(a){var b={},c={F_imgMinWidth:700,F_imgMinHeight:600,F_txtMinWidth:600,F_txtMinHeight:600,imgRatio:30,noimgRatio:70,noimgHeightRatio:30},d=a(parent.window).width(),e=a(parent.window).height(),f=0,g=0,h=function(f){if(b.settings=jQuery.extend({},c,f),0<a(".is-status-logoff").length?a(".review-logoff").removeClass("displaynone"):a(".review-logon").removeClass("displaynone"),a("#linkBoardPrev").hasClass("displaynone"))var g=null;else var g=a("#linkBoardPrev").val();if(a("#linkBoardNext").hasClass("displaynone"))var h=null;else var h=a("#linkBoardNext").val();if(setTimeout(function(){parent.ListReview.arrowPrevNext(g,h)},100),a(".reviewDelete").click(function(){a("#list_url").val("/board/review/delete.html")}),0>=a(".view-photo img").length){if(!mobileWeb){a(".review-view-wrap").addClass("noImg"),a("#readReviewFrameWrap, #readReviewFrame",parent.document).addClass("noImg");var i=d*(1-b.settings.noimgRatio/100),k=e*(1-b.settings.noimgHeightRatio/100),o=i,p=k;o<b.settings.F_txtMinWidth&&(o=b.settings.F_txtMinWidth),p<b.settings.F_txtMinHeight&&(p=b.settings.F_txtMinHeight),a(".review-view-wrap.noImg").width(o);var q=-(p/2),r=-(o/2),s={width:o,marginLeft:r,height:p,marginTop:q}}if(mobileWeb)var s={width:"100%",height:"100%",left:"0",top:"0"};return void m(s)}a("#reviewPhotos br").remove(),a("#reviewPhotos img").wrap("<li></li>"),l(0),n(),mobileWeb&&j()},i=function(){a(".pop-review-bg .review-loading",parent.document).hide(),a("#readReviewFrame, #readReviewFrameWrap .read.close",parent.document).fadeIn("fast").promise().done(function(){mobileWeb&&a("html",parent.document).addClass("review")}),-1!=navigator.userAgent.toLowerCase().indexOf("firefox")&&l(g)},j=function(){a(document).on("click",".close-review",function(a){a.preventDefault(),k()})},k=function(){a(".pop-review-bg",parent.document).hide(),a("html",parent.document).removeClass("review"),0<a(".pop-review-bg #readReviewFrame",parent.document).length&&a(".pop-review-bg #readReviewFrame",parent.document).remove()},l=function(c){if(!mobileWeb){d=a(parent.window).width(),e=a(parent.window).height();var f=d*(1-b.settings.imgRatio/100),g=e*(1-b.settings.imgRatio/100),h=a("#reviewPhotos li:eq("+c+") img").prop("naturalWidth"),i=a("#reviewPhotos li:eq("+c+") img").prop("naturalHeight"),j=a(".view-prod-info").outerWidth(),k=f-j,l=b.settings.F_imgMinWidth+j,n=b.settings.F_imgMinHeight,o=b.settings.F_imgMinWidth,p=b.settings.F_imgMinHeight;h<i&&(n=g,p=i>g?g:i<b.settings.F_imgMinHeight?b.settings.F_imgMinHeight:i,l=h*(100*(p/i))/100+j,a("#reviewPhotos li:eq("+c+") img").css({width:"auto",height:p})),h>i&&(l=f,o=h>k?k:h<b.settings.F_imgMinHeight?b.settings.F_imgMinHeight:h,l=o+j,n=i*(100*(o/h))/100,a("#reviewPhotos li:eq("+c+") img").css({width:o,height:"auto"})),h==i&&(o=h,p=i,l=o+j,n=i,g<n&&(l=h*(100*(g/i))/100+j,n=g,o=h*(100*(g/i))/100,p=g),f<o&&(l=f,n=i*(100*(f/h))/100,o=f,p=i*(100*(f/h))/100),a("#reviewPhotos li:eq("+c+") img").css({width:o,height:p})),b.settings.F_imgMinHeight>n&&(n=b.settings.F_imgMinHeight),b.settings.F_imgMinWidth>l&&(l=b.settings.F_imgMinWidth);var q=-(l/2),r=-(n/2);a(".view-photo").css({width:Math.floor(l-j),height:Math.floor(n)}),a(".view-prod-info").css("height",Math.floor(n));var s={width:l,height:n,left:"50%",marginLeft:q,top:"50%",marginTop:r}}if(mobileWeb)var s={width:"100%",height:"100%",left:"0",top:"0"};-1!=navigator.userAgent.toLowerCase().indexOf("firefox")&&(s.display="block"),m(s)},m=function(b){setTimeout(function(){a("#readReviewFrameWrap, #readReviewFrame",parent.document).css(b)},0)},n=function(){var b=parent.ListReview.getParam("load_slide_no",location.href);b=b?b.replace(/[^0-9]/g,""):0;var c="fade",d=0;if(mobileWeb&&(c="horizontal",d=400),!(1<a("#reviewPhotos li").length))a("#reviewPhotos").addClass("alone"),mobileWeb?a(document).on("click","#reviewPhotos li img",function(){window.open(a(this).attr("src"),"img_blank")}):a(document).on("click","#reviewPhotos li",function(){o(0)});else if(mobileWeb){a("html").width(a(parent.window).width()),a("#reviewPhotos").wrap("<div class=\"review-photos swiper-container\"></div>").addClass("swiper-wrapper"),a("#reviewPhotos li").addClass("swiper-slide"),a(".review-photos").append("<div class=\"swiper-pagination\"></div>");var e=new Swiper(".review-photos",{speed:500,autoHeight:!0,pagination:{el:".review-photos .swiper-pagination",clickable:!0},loop:!0,grabCursor:!0})}else var e=a("#reviewPhotos").bxSlider({mode:c,auto:!1,autoHover:!1,speed:d,pause:2500,adaptiveHeight:!1,pager:!0,startSlide:b,onSliderLoad:function(){mobileWeb||a(document).on("click","#reviewPhotos li",function(){o(e.getCurrentSlide())}),1>=a("#reviewPhotos li").length&&a(".review-view-wrap .bx-has-controls-direction").addClass("displaynone"),g=b,l(b)},onSlideBefore:function(a,b,c){f=c,l(c)}})},o=function(b){var c="";a("#reviewPhotos li:not(\".bx-clone\")").each(function(){c+="\t<li><img src=\""+a(this).children("img").prop("src")+"\" /></li>\n"});var d=a("<ul class=\"cloneReviewPhotos\"></ul>").append(c);parent.ListReview.imageSlide(d,b)},p=function(){if(a(".btn-review-help").hasClass("active"))return void alert("\uC774\uBBF8 \uCD94\uCC9C\uD558\uC600\uC2B5\uB2C8\uB2E4.");var b=a(".view-prod-info #no").val(),c=parent.ListReview.voteUp(b);a(".review-help-count").text(c),a(".btn-review-help, .review-help-count").addClass("active")};return{frameResize:function(a){l(a)},init:function(a){h(a)},load:function(){i()},getCurrentIndex:function(){return f},voteUp:function(){p()},modifyDenied:function(){-1<document.referrer.toLowerCase().indexOf("/review/modify.html")&&k()}}}(jQuery11),observer=new MutationObserver(function(a){jQuery11(a).each(function(){$(".info-box-wrap .subject").text().includes("\uCC28\uB2E8\uB41C")&&$(".review-view-wrap").addClass("disp-block-target")}).promise().done(function(){observer.disconnect()})}),config={attributes:!1,childList:!0,characterData:!1};$("#review .subject").each(function(){observer.observe(this,config)});